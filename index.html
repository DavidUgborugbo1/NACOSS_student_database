<!DOCTYPE html>
<html lang="en">
<head>


    <meta charset="UTF-8">
    <title>Student database</title>

    <link href="{{url_for('static', filename='css/bootstrap.min.css')}}" rel="stylesheet">



</head>
<body>

{%blockbody%}
    
<div class="container-fluid">
    <div class="text-center alert alert-success">
        <h1>NACOSS 100 Level Student Database</h1>
    </div>

    <div class="container-fluid">

    <div class="row">
        <div class="col md-12">

            <h2>Student List <button type="button" class="btn btn-primary pull-right" data-toggle = "modal" data-target = "#mymodal">
                Add Student Data </button></h2>

            {%with messages = get_flashed_messages()%}

            {%if messages%}

            {%for message in messages%}

            <div class="alert alert-success alert-dismissable" role="alert">

    <button type="button" class="close" data-dismiss="alert" aria-label="close">

        <span aria-hidden="true">x</span>

    </button>

    {%endfor%}
    {%endif%}
    {%endwith%}

</div>
</div>





<table class="table table-striped">

    <tr>
        <th>Serial No.</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Email</th>
        <th>Phone Number</th>
        <th>Action</th>
</tr>
    
{%for row in srudents%}
<tr>
    <td>{{loop.index}}</td>
    <td>{{row.1}}</td>
    <td>{{row.2}}</td>
    <td>{{row.3}}</td>
    <td>{{row.4}}</td>

    <td>
        <a href="/update/{{row.0}}" class="btn btn-primary btn-xs" data-toggle="modal" data-target="#modaledit{{row.0}}">Edit</a>
        <a href="/delete/{{row.0}}" class="btn btn-primary btn-xs" onclick="return confirm('Are You Sure You Want To Delete?')">Delete</a>
    </td>


</tr>

<div id="modaledit{{row.0}}" class="modal fade" role="dialog">

    <div class="modal-dialog">

        <div class="modal-content">

            <div class="modal-header">

                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title"> Update Data</h4>
            </div>
            <div class="modal-body">
                
       <form action="{{url_for('update')}}" method="POST"> 
            
           <div class="form-group">

                    <label>First Name:</label>
                    <input type="hidden" name="id" value="{{row.0}}">
                    <input type="text" class="form-control" name="First Name" value="{{row.1}}">

                </div>

                <div class="form-group">

                    <label>Last Name:</label>
                    <input type="text" class="form-control" name="Last Name" value="{{row.2}}">

                </div>
                <div class="form-group">

                    <label>Email:</label>
                    <input type="text" class="form-control" name="Email" value="{{row.3}}">


                <div class="form-group">

                    <Label>Phone Number:</Label>
                    <input type="number" class="form-control" name="Phone Number" value="{{row.4}}">


                <div class="form-group">

                </div>

                <button class="btn btn-primary" type="Submit">Update</button>


                </div>


                </div>

            </form>

        </div>

    <div class="modal-footer">

        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>

    </div>

    </div>

</div>
     </div>

     {%endfor%}
        </table>



    </div>


</div>

<div id="mymodal" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title"> Please Insert Data</h4>

            </div>
            <div class="modal-body">

                <form action="{{url_for('insert')}}" method="POST">

                    <div class="form-group">

                        <label>First Name:</label>
                        <input type="text" class="form-control" name="First Name" required="1">

                    </div>

                    <div class="form-group">

                        <label>Last Name:</label>
                        <input type="text" class="form-control" name="Last Name" required="1">

                    </div>
                    <div class="form-group">

                        <label>Email:</label>
                        <input type="text" class="form-control" name="Email" required="1">


                    <div class="form-group">

                        <Label>Phone Number:</Label>
                        <input type="number" class="form-control" name="Phone Number" required="1">


                    <div class="form-group">

                        <button class="btn btn-primary" type="Submit">Submit</button>

                    </div>



                    </div>


                    </div>

                </form>

            </div>
            
<div class="modal-footer">

            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>

        </div>

        </div>
    </div>
</div>

{%endblock%}

<script type="text/javascript" src="{{url_for('static', filename='js/jquery-3.7.1.min.js')}}"></script>
<script type="text/javascript" src="{{url_for('static', filename='js/bootstrap.min.js')}}"></script>

</div>


</body>
</html>
